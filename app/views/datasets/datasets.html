<!-- Add Dataset Modal Template -->
<script type="text/ng-template" id="addDatasetModalContent.html">
    <!-- First step of modal -->
    <div ng-show="step == 1">
        <div class="modal-header">
            <h3 class="modal-title">New Dataset</h3>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="newDatasetName">Name</label>
                <input type="text" class="form-control" id="newDatasetName" ng-model="input.name">
            </div>
            <div class="form-group">
                <label for="newDatasetDesc">Description</label>
                <input type="text" class="form-control" id="newDatasetDesc" ng-model="input.description">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="next()">Next</button>
            <button class="btn btn-danger" type="button" ng-click="cancel()">Cancel</button>
        </div>
    </div>
    <!-- Second step of modal -->
    <div ng-show="step == 2">
        <div class="modal-header">
            <h3 class="modal-title">Add Attributes</h3>
        </div>
        <div class="modal-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="newAttributeName">Column Name</label>
                        <input type="text" class="form-control" id="newAttributeName" ng-model="newAttribute.col_name">
                    </div>
                    <div class="form-group">
                        <label for="newAttributeDescription">Description</label>
                        <input type="text" class="form-control" id="newAttributeDescription" ng-model="newAttribute.description">
                    </div>
                    Data Type:
                    <div class="btn-group" uib-dropdown is-open="status.isopentype">
                        <button id="data-type-dropdown" type="button" class="btn btn-primary" uib-dropdown-toggle>
                            {{newAttribute.data_type}} <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="data-type-dropdown">
                            <li role="menuitem"><a prevent-default ng-click="selectType('String')">String</a></li>
                            <li role="menuitem"><a prevent-default ng-click="selectType('Integer')">Integer</a></li>
                            <li role="menuitem"><a prevent-default ng-click="selectType('Double')">Double</a></li>
                        </ul>
                    </div>
                    Tag:
                    <div class="btn-group" uib-dropdown is-open="status.isopentag">
                        <button id="tag-dropdown" type="button" class="btn btn-primary" uib-dropdown-toggle>
                            {{newAttribute.tag.name}} <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="tag-dropdown">
                            <li ng-repeat="tag in tags" role="menuitem"><a prevent-default ng-click="selectTag(tag)">{{tag.name}} : {{tag.description}}</a></li>
                        </ul>
                    </div>
                    <button class="btn btn-primary" ng-click="addAttr()"><span class="glyphicon glyphicon-plus"></span></button>
                </div>
                <!-- Working on list for attributes -->
                <!-- <div class="col-md-6">
                    <h2>Here is second column</h2>
                </div> -->

                <div class="col-md-6">
                    <ul ng-repeat="a in input.attributes">
                        <li>{{a.col_name}} // {{a.tag.name}}
                            <button class="btn btn-danger btn-xs" type="button" ng-click="removeAttr($index)">
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-default" type="button" ng-click="previous()">Previous</button>
            <button class="btn btn-success" type="button" ng-click="submit()">Create</button>
            <button class="btn btn-danger" type="button" ng-click="cancel()">Cancel</button>
        </div>

    </div>
</script>

<!-- Dataset Info Modal -->

<script type="text/ng-template" id="datasetInfo.html">
    <div class="modal-header">
        <button type="button" class="close" ng-click="close()"><span aria-hidden="true">&times;</span></button>
        <h3 class="modal-title">{{dataset.name}}</h3>

    </div>
    <div class="modal-body">
        <h4>Description</h4>
        <p>{{dataset.description}}</p>
        <br>
        <h4 class="">Columns</h4>
        <ul class="inline-list">
            <li ng-repeat="attr in dataset.attributes"><span class="badge">{{attr.col_name}}</span></li>
        </ul>
    </div>

</script>


<!-- Delete Dataset Modal -->

<script type="text/ng-template" id="datasetDelete.html">
    <div class="modal-header">
        <h3 class="modal-title"> Delete Dataset</h3>

    </div>
    <div class="modal-body">
        <p>Are you sure you want to delete <em><strong>{{dataset.name}}</strong></em>? This action cannot be undone!</p>
    </div>
    <div class="modal-footer">
        <button class="btn btn-danger" type="button" ng-click="delete()">Delete</button>
        <button class="btn btn-default" type="button" ng-click="cancel()">Cancel</button>
    </div>

</script>


<!-- Page Content -->

<div class="container-fluid">
    <ul class="nav nav-pills">
        <li class="active"><a href="#/developer/datasets">Data Management</a></li>
        <li><a href="#/developer/tags">Tag Management</a></li>
    </ul>
    <hr>
    <uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</uib-alert>
    <button class="btn btn-warning" type="button" ng-click="open()">
        <span class="glyphicon glyphicon-plus"></span> Add Dataset
    </button>

    <br>
    <br>
    <div class="status-message" ng-show="showNoDatasetsMessage"> NO DATASETS </div>

    <uib-progressbar value="100" class="progress-striped active" ng-show="showProgressBar">Loading...</uib-progressbar>



    <ul class="list-group" id="dataset_list">
        <li class="list-group-item active" id="dataset_item" ng-repeat="d in datasetList">
            <label>{{d.name}}</label>
            <button class="btn btn-danger" type="button" ng-click="deleteDataset(d)" uib-tooltip="Delete">
                <span class="glyphicon glyphicon-trash"></span></button>
            <button class="btn btn-default" type="button" ng-click="moreInfo[$index]=!moreInfo[$index]" uib-tooltip="Info">
                <span class="glyphicon glyphicon-info-sign"></span></button>
            <div class="more_info" ng-show="moreInfo[$index]">
                <strong>Description</strong>
                <br> {{d.description}}
                <br>
                <strong>Tags</strong>
                <ul class="inline-list">
                    <li ng-repeat="t in d.tags" ng-if="t.name != '<EMPTY>'"><span class="label label-info">{{t.name}}</span></li>
                </ul>
                <strong>Columns</strong>
                <ul class="inline-list">
                    <li ng-repeat="attr in d.attributes"><span class="label label-default">{{attr.col_name}}</span></li>
                </ul>
            </div>

        </li>
    </ul>
</div>
